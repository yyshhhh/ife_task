<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>task 3.2</title>
	<style type="text/css">

		form{width: 300px; font-family: Microsoft Yahei;}
		form>div{margin: 20px;}
		label input{float: right; display: inline-block; width: 175px; padding: 0;}
		label+div{color: grey; margin-left: 85px; font-size: 12px; color:grey;}
		.wrong input{border: solid 1px red;}
		.wrong div{color: red;}
		.correct input{border: solid 1px green;}
		.correct div{color: green;}
		button{float: right;  margin-right: 20px;}
	</style>
</head>
<body>
<form>
	<div id="name1">
		<label>
			<span>名称</span>
			<input type="" name="" id="input1">
		</label>
		<div id="tip1"></div>
	</div>
	<div id="password1">
		<label>
			<span>密码</span>
			<input type="password" name="" id="input2">
		</label>
		<div id="tip2"></div>
	</div>
	<div id="password2">
		<label>
			<span>密码确认</span>
			<input type="password" name="" id="input3">
		</label>
		<div id="tip3"></div>
	</div>
	<div id="email">
		<label>
			<span>邮箱</span>
			<input type="" name="" id="input4">
		</label>
		<div id="tip4"></div>
	</div>
	<div id="telphone">
		<label>
			<span>手机</span>
			<input type="" name="" id="input5">
		</label>
		<div id="tip5"></div>
	</div>
	<button type="submit" id="testBtn">提交</button>
</form>
	
	<script type="text/javascript">
		var tip1 = document.getElementById('tip1');
		var tip2 = document.getElementById('tip2');
		var tip3 = document.getElementById('tip3');
		var tip4 = document.getElementById('tip4');
		var tip5 = document.getElementById('tip5');
		var input1 = document.getElementById('input1');
		var input2 = document.getElementById('input2');
		var input3 = document.getElementById('input3');
		var input4 = document.getElementById('input4');
		var input5 = document.getElementById('input5');
		var testBtn = document.getElementById('testBtn');
		var test1, test2, test3, test4, test5;
		
		input1.onfocus = function () {
			tip1.innerHTML = '必填，长度为4-16个字符'
		}

		input1.onblur = function () {
			var nameValue = input1.value;
			if ( !nameValue ){
				input1.parentNode.parentNode.className = 'wrong';
				tip1.innerHTML = '姓名不能为空';
			}
			else{
				var length;
				if ( /[^\x00-\xff]/g.exec(nameValue) ){
					length = nameValue.length + nameValue.match(/[^\x00-\xff]/g).length;
				}
				else {
					length = nameValue.length;
				}
				if ( length >= 4 && length <= 16) {
					input1.parentNode.parentNode.className = 'correct';
					tip1.innerHTML = '名称格式正确';
					test1 = 1;
				}
				else {
					input1.parentNode.parentNode.className = 'wrong';
					tip1.innerHTML = '必填，长度为4~16个字符';
				}
			} 			
		}

		input2.onfocus = function () {
			tip2.innerHTML = '必填，由4-16位英文字母或数字组成'
		}

		input2.onblur = function () {
			var pwValue = input2.value;
			if ( !pwValue ){
				input2.parentNode.parentNode.className = 'wrong';
				tip2.innerHTML = '密码不能为空';
			}
			else if (/[\W]/.test(pwValue)) {
				input2.parentNode.parentNode.className = 'wrong';
				tip2.innerHTML = '必填，由4-16位英文字母或数字组成';
			}
			else{
				var length;
				length = pwValue.length
				if ( length >= 4 && length <= 16) {
					input2.parentNode.parentNode.className = 'correct';
					tip2.innerHTML = '密码可用';
					test2 = 1;
				}
				else {
					input2.parentNode.parentNode.className = 'wrong';
					tip2.innerHTML = '必填，由4-16位英文字母或数字组成';
					
				}
			}				
		}

		input3.onfocus = function () {
			tip3.innerHTML = '再次输入相同密码';
		}

		input3.onblur = function () {
			if ( input3.value == input2.value ) {
				input3.parentNode.parentNode.className = 'correct';
				tip3.innerHTML = '密码输入一致';
				test3 = 1;
			}
			else {
				input3.parentNode.parentNode.className = 'wrong';
				tip3.innerHTML = '密码输入不一致';
			}
		}

		input4.onfocus = function () {
			tip4.innerHTML = '必填，输入正确的邮箱地址'
		}

		input4.onblur = function () {
			var emValue = input4.value;
			if ( !emValue ){
				input4.parentNode.parentNode.className = 'wrong';
				tip4.innerHTML = '邮箱不能为空';
			}
			else if (/^[\w_-]+[\w_-]*@[\w]+(\.[\w]*)+$/.test(emValue)) {
				input4.parentNode.parentNode.className = 'correct';
				tip4.innerHTML = '邮箱格式正确';
				test4 = 1;
			}
			else{
				input4.parentNode.parentNode.className = 'wrong';
				tip4.innerHTML = '邮箱格式错误';
			}				
		}

		input5.onfocus = function () {
			tip5.innerHTML = '必填，输入正确的手机号码'
		}

		input5.onblur = function () {
			var phValue = input5.value;
			if ( !phValue ){
				input5.parentNode.parentNode.className = 'wrong';
				tip5.innerHTML = '手机不能为空';
			}
			else if (/^1\d{10}$/.test(phValue)) {
				input5.parentNode.parentNode.className = 'correct';
				tip5.innerHTML = '手机格式正确';
				test5 = 1;
			}
			else{
				input5.parentNode.parentNode.className = 'wrong';
				tip5.innerHTML = '手机格式错误';
			}				
		}

		testBtn.onclick = function () {
			if ( test1 == 1 && test2 == 1 && test3 == 1 && test4 == 1 && test5 == 1){
				alert('提交成功！');
			}
			else {
				alert('提交失败！');
			}
		}

	</script>
</body>
</html>