<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>task 3.4</title>
	<style type="text/css">
		#boxs{display: inline-block; width: 600px; }

		.top{margin-left: 51px; height: 51px;}
		.top div{float: left; width: 51px; text-align: center; font: 20px/51px SimSun;}

		.side{float: left; width: 50px;}
		.side div{height: 51px; text-align: center; font: 20px/51px SimSun;}

		#blocks{position: relative; clear: left;  display: inline-block; width: 509px; height: 509px; border: solid 2px #333333;}
		.clearfix:after{content: '.'; clear: both; display: block; height: 0; overflow: hidden; visibility: hidden;}
		span{display: block; float: left; margin: 0; padding: 0; width: 50px; height: 50px; border-left:solid 1px #cccccc; border-top:solid 1px #cccccc;}
		div span:first-child{border-left: none;}
		#div1 span{border-top:none;}

		.bottom{margin-left: 51px; margin-top: 20px;}

		#block{position: absolute; left: 0; top: 0; transition:1s; width: 50px; height: 50px; background: url(http://images.yyshhhh.com/3.4block.png); background-repeat: no-repeat;}

		#instr{display: inline-block; font: 14px/28px Microsoft Yahei;}

	}
	</style>
</head>
<body>
<div id="boxs">
	<div class="top">
		<div>1</div>
		<div>2</div>
		<div>3</div>
		<div>4</div>
		<div>5</div>
		<div>6</div>
		<div>7</div>
		<div>8</div>
		<div>9</div>
		<div>10</div>
	</div>
	<div class="side">
		<div>1</div>
		<div>2</div>
		<div>3</div>
		<div>4</div>
		<div>5</div>
		<div>6</div>
		<div>7</div>
		<div>8</div>
		<div>9</div>
		<div>10</div>
	</div>
	<div id="blocks">
		<div class="clearfix" id="div1">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<div class="clearfix">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<div class="clearfix">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<div class="clearfix">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<div class="clearfix">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<div class="clearfix">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<div class="clearfix">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<div class="clearfix">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<div class="clearfix">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<div class="clearfix">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>
		<div id="block"></div>
	</div>
	<div class="bottom">
		<input type="" name="" id="order">
		<input type="button" name="" value="执行" id="btn">
	</div>
</div>
<div id="instr">
	<pre>
	说明：
	小方块的蓝色部分是小方块的前进方向
	命令：
	go           向前进方向前进一格
	turn lef     逆时针旋转九十度
	turn rig     顺时针旋转九十度
	turn bac     旋转一百八十度
	tra lef      向左移动一格
	move lef     前进方向改为向左并向左前进一格
	tra rig      向右移动一格
	move rig     前进方向改为向右并向右前进一格
	tra top      向上移动一格
	move top     前进方向改为向上并向上前进一格
	tra bot      向下移动一格
	move bot     前进方向改为向下并向下前进一格
	</pre>
</div>

	<script type="text/javascript">
		var order = document.getElementById('order');
		var btn = document.getElementById('btn');

		var obj = {
			x: 0,
			y: 0,
			dir: 0
		};


		var blocks = document.getElementById('blocks');
		var block = document.getElementById('block');

		function shine( obj ){
			block.style.left = obj.x*51 + 'px';
			block.style.top = obj.y*51 + 'px';
			var deg = ((obj.dir%4 == 0 && 0) || (obj.dir%4 == 1 && -90) || (obj.dir%4 == 2 && 180) || (obj.dir%4 == 3 && 90)) +  'deg';
			block.style.transform = 'rotate(' + deg + ')';
		}

		//TURN lEFT
		function turnLef (obj) {
			obj.dir = obj.dir + 1;
			return obj;
		}

		//TURN RIGHT
		function turnRig (obj) {
			obj.dir = obj.dir + 3;
			return obj;
		}

		//TURN BACK
		function turnBac (obj) {
			obj.dir = obj.dir + 2;
			return obj;
		}

		//GO
		function go (obj){
			var dirr = obj.dir % 4;
			switch(dirr){
				case 0:
					if (obj.y > 0){
						--obj.y;
					}
					else {
						alert('超过边界')
					}
					break;
				case 1:
					if (obj.x > 0){
						--obj.x;
					}
					else {
						alert('超过边界')
					}
					break;
				case 2:
					if (obj.y < 9){
						++obj.y;
					}
					else {
						alert('超过边界')
					}
					break;
				case 3:
					if (obj.x < 9){
						++obj.x;
					}
					else {
						alert('超过边界')
					}
					break;
			}
			return obj;
		}

		//tra lef
		function  traLef (obj){
			if (obj.x > 0 ){
				--obj.x;
			}
			else {
				alert('超过边界')
			}
			return obj;
		}

		//tra top
		function  traTop (obj){
			if (obj.y > 0 ){
				--obj.y;
			}
			else {
				alert('超过边界')
			}
			return obj;
		}

		//tra rig
		function  traRig (obj){
			if (obj.x < 9 ){
				++ obj.x;
			}
			else {
				alert('超过边界')
			}
			return obj;
		}

		//tra bot
		function  traBot (obj){
			if (obj.y < 9 ){
				++obj.y;
			}
			else {
				alert('超过边界')
			}
			return obj;
		}

		//mov lef
		function  movLef (obj){
			block.style.transform = 'rotate(-90deg)';
			if (obj.x > 0 ){
				--obj.x;
			}
			else {
				alert('超过边界')
			}
			block.style.left = obj.x*51 + 'px';
			block.style.top = obj.y*51 + 'px';
			obj.dir = 1;
			return obj;
		}

		//mov top
		function  movTop (obj){
			block.style.transform = 'rotate(0deg)';
			if (obj.y > 0 ){
				--obj.y;
			}
			else {
				alert('超过边界')
			}
			block.style.left = obj.x*51 + 'px';
			block.style.top = obj.y*51 + 'px';
			obj.dir = 0;
			return obj;
		}

		//mov rig
		function  movRig (obj){
			block.style.transform = 'rotate(90deg)';
			if (obj.x < 9 ){
				++ obj.x;
			}
			else {
				alert('超过边界')
			}
			block.style.left = obj.x*51 + 'px';
			block.style.top = obj.y*51 + 'px';
			obj.dir = 3;
			return obj;
		}

		//mov bot
		function  movBot (obj){
			block.style.transform = 'rotate(180deg)';
			if (obj.y < 9 ){
				++obj.y;
			}
			else {
				alert('超过边界')
			}
			block.style.left = obj.x*51 + 'px';
			block.style.top = obj.y*51 + 'px';
			obj.dir = 2;
			return obj;
		}


		btn.onclick = function(){
			if (order.value.toLowerCase() == "go"){
				go(obj);
				shine(obj);
			}
			else if (order.value.toLowerCase() == 'turn lef'){
				turnLef (obj);
				shine(obj);
			}
			else if (order.value.toLowerCase() == 'turn rig'){
				turnRig (obj);
				shine(obj);
			}
			else if (order.value.toLowerCase() == 'turn bac'){
				turnBac (obj);
				shine(obj);
			}

			else if(order.value.toLowerCase() == 'tra lef'){
				traLef(obj);
				shine(obj);
			}
			else if(order.value.toLowerCase() == 'mov lef'){
				movLef(obj);
			}

			else if(order.value.toLowerCase() == 'tra top'){
				traTop(obj);
				shine(obj);
			}
			else if(order.value.toLowerCase() == 'mov top'){
				movTop(obj);
			}

			else if(order.value.toLowerCase() == 'tra rig'){
				traRig(obj);
				shine(obj);
			}
			else if(order.value.toLowerCase() == 'mov rig'){
				movRig(obj);
			}

			else if(order.value.toLowerCase() == 'tra bot'){
				traBot(obj);
				shine(obj);
			}
			else if(order.value.toLowerCase() == 'mov bot'){
				movBot(obj);
			}
			else {
				alert('请输入正确的指令');
			}
		}


	</script>
</body>
</html>